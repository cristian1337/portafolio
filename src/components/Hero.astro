---
---

<div class="hero-container">
	<div class="semicircle-blur"></div>
	<canvas id="hero-web"></canvas>

	<div class="hero-content">
		<span class="badge">Agencia de Desarrollo Digital</span>

		<h1>
			Transformamos tus ideas en
			<span class="highlight">Experiencias Digitales</span> de Alto Impacto
		</h1>

		<p class="hero-description">
			Impulsa tu negocio con soluciones tecnológicas de vanguardia.
			Especialistas en <strong>Diseño Web, E-commerce, Aplicaciones Móviles</strong>
			y <strong>Software a la Medida</strong> escalable.
		</p>

		<div class="scroll-indicator">
			<div class="scroll-icon">
				<div class="scroll-wheel"></div>
			</div>
		</div>
	</div>
</div>

<style>
	.hero-container {
		position: relative;
		width: 100%;
		height: 300vh;
		overflow: hidden;
	}

	.semicircle-blur {
		position: fixed;
		top: -300px;
		left: 50%;
		transform: translateX(-50%);
		width: 600px;
		height: 600px;
		background: #3B82F6;
		border-radius: 50%;
		filter: blur(150px);
		opacity: 0.5;
		z-index: 0;
		pointer-events: none;
	}

	#hero-web {
		position: fixed;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		max-width: 100vw;
		max-height: 100vh;
		z-index: 1;
		pointer-events: none;
		will-change: transform, opacity;
	}

	body {
		overflow-x: hidden;
	}

	.hero-content {
		position: fixed;
		top: 40%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 90%;
		max-width: 1200px;
		text-align: center;
		z-index: 10;
		color: white;
	}

	.badge {
		display: inline-block;
		padding: 8px 20px;
		background: rgba(255, 255, 255, 0.1);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: 50px;
		font-size: 0.875rem;
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 1px;
		margin-bottom: 1.5rem;
		backdrop-filter: blur(10px);
	}

	h1 {
		font-family: "kulture", sans-serif;
		font-size: clamp(1.6rem, 5vw, 4rem);
		line-height: 1.2;
		margin-bottom: 1.5rem;
	}

	.highlight {
		color: rgba(255, 255, 255, 0.9);
		font-weight: 700;
		display: inline-block;
		position: relative;
		text-shadow:
			0 0 10px rgba(102, 126, 234, 0.5),
			0 0 20px rgba(118, 75, 162, 0.3);
	}

	.hero-description {
		font-size: clamp(1rem, 2vw, 1.25rem);
		line-height: 1.6;
		margin-bottom: 2rem;
		color: rgba(255, 255, 255, 0.85);
		max-width: 800px;
		margin-left: auto;
		margin-right: auto;
	}

	.hero-description strong {
		color: white;
		font-weight: 600;
	}

	.scroll-indicator {
		position: absolute;
		bottom: -270px;
		left: 50%;
		transform: translateX(-50%);
	}

	.scroll-icon {
		width: 30px;
		height: 50px;
		border: 2px solid rgba(255, 255, 255, 0.5);
		border-radius: 20px;
		position: relative;
		cursor: pointer;
	}

	.scroll-wheel {
		width: 4px;
		height: 10px;
		background: white;
		border-radius: 2px;
		position: absolute;
		top: 8px;
		left: 50%;
		transform: translateX(-50%);
	}

	@media (min-width: 320px) and (max-width: 500px) {
		#hero-web {
			top: 65%;
		}
		.scroll-indicator {
			bottom: -100%;
		}
		.hero-container {
			height: 150vh;
		}
	}
</style>

<script>
	import { gsap } from "gsap";
	import { SplitText, ScrollTrigger } from "gsap/all";

	gsap.registerPlugin(SplitText);
	gsap.registerPlugin(ScrollTrigger);

	const tl = gsap.timeline();

	// Canvas setup
	const canvasHero = document.getElementById("hero-web");
	const ctx = canvasHero.getContext("2d");

	canvasHero.width = 1920;
	canvasHero.height = 1080;

	const frames = 140;
	const currentFrame = (index) => {
		return `/hero_secuence/compressed_web_${String(index).padStart(5, "0")}.webp`;
	};

	const images = [];
	const webs = {
		frame: 0
	}

	for (let i = 0; i < frames; i++) {
		const img = new Image();
		img.src = currentFrame(i);
		images.push(img);
	}

	// Canvas animation
	gsap.from("#hero-web", {
		scale: 1.2,
		autoAlpha: 0,
		duration: 1,
		filter: "blur(5px)",
		ease: "power2.inOut"
	});

	tl.to(webs, {
		frame: frames - 1,
		snap: "frame",
		ease: "none",
		scrollTrigger: {
			trigger: ".hero-container",
			start: "top top",
			end: "bottom bottom",
			scrub: 0.5,
		},
		onUpdate: render
	});

	// Fade out canvas and blur at the end of hero section
	const isMobile = window.innerWidth < 768;

	gsap.fromTo("#hero-web",
		{
			autoAlpha: 1,
			scale: 1
		},
		{
			autoAlpha: 0,
			scale: 0.8,
			ease: "none",
			scrollTrigger: {
				trigger: ".hero-container",
				start: isMobile ? "60%" : "80%",
				end: "bottom bottom",
				scrub: 1
			}
		}
	);

	gsap.fromTo(".semicircle-blur",
		{
			autoAlpha: 0.5
		},
		{
			autoAlpha: 0,
			ease: "none",
			scrollTrigger: {
				trigger: ".hero-container",
				start: isMobile ? "60%" : "80%",
				end: "bottom bottom",
				scrub: 1
			}
		}
	);

	images[0].onload = render;

	function render() {
		ctx.clearRect(0, 0, canvasHero.width, canvasHero.height);
		ctx.drawImage(images[webs.frame], 0, 0);
	}

	// Text animations
	const splitH1 = new SplitText("h1", {
		type: "words,chars"
	});

	// Badge animation
	gsap.from(".badge", {
		y: -30,
		autoAlpha: 0,
		duration: 1,
		delay: 0.3,
		ease: "power3.out"
	});

	// H1 animation with chars stagger
	gsap.from(splitH1.chars, {
		y: 100,
		autoAlpha: 0,
		rotationX: -90,
		stagger: 0.02,
		duration: 1,
		delay: 0.6,
		ease: "power4.out"
	});

	// Hero description animation
	gsap.from(".hero-description", {
		y: 30,
		autoAlpha: 0,
		duration: 1,
		delay: 1.2,
		ease: "power3.out"
	});

	// Scroll indicator animation (infinite loop)
	gsap.to(".scroll-wheel", {
		y: 15,
		autoAlpha: 0,
		duration: 1.5,
		delay: 2,
		ease: "power2.inOut",
		repeat: -1
	});

	gsap.from(".scroll-indicator", {
		autoAlpha: 0,
		duration: 1,
		delay: 1.8,
		ease: "power2.out"
	});

	// Text fade out and blur on scroll
	if (window.innerWidth >= 768) {
		gsap.to(".hero-content", {
			autoAlpha: 0,
			filter: "blur(20px)",
			ease: "none",
			scrollTrigger: {
				trigger: ".hero-container",
				start: "top top",
				end: "15%",
				scrub: 1
			}
		});
	} else {
		// Mobile: fade out without blur for better performance
		gsap.to(".hero-content", {
			autoAlpha: 0,
			ease: "none",
			scrollTrigger: {
				trigger: ".hero-container",
				start: "top top",
				end: "20%",
				scrub: 1
			}
		});

		// Also reduce z-index to prevent overlap
		gsap.to(".hero-content", {
			zIndex: -1,
			scrollTrigger: {
				trigger: ".hero-container",
				start: "10%",
				toggleActions: "play none none reverse"
			}
		});
	}
</script>
